# ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
# ┃                    Autostart Configuration                  ┃
# ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

source = ~/.config/hypr/config/defaults.conf

# Autostart wiki https://wiki.hyprland.org/0.45.0/Configuring/Keywords/#executing #
exec-once = quickshell -c ~/.config/quickshell &
exec-once = hyprpm reload > /dev/null 2>&1
# Authentication agent (try multiple paths for different distros)
exec-once = /usr/lib/polkit-kde-authentication-agent-1 || /usr/lib/x86_64-linux-gnu/libexec/polkit-kde-authentication-agent-1 || /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
exec-once = hyprctl setcursor Bibata-Modern-Amber 24 > /dev/null 2>&1
exec-once = gsettings set org.gnome.desktop.interface cursor-theme 'Bibata-Modern-Amber' > /dev/null 2>&1
exec-once = gsettings set org.gnome.desktop.interface icon-theme "Papirus-Dark"

# Slow app launch fix
exec-once = systemctl --user import-environment > /dev/null 2>&1 &
exec-once = hash dbus-update-activation-environment > /dev/null 2>&1 &
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP > /dev/null 2>&1 &

# GNOME Keyring
exec-once = gnome-keyring-daemon --start --components=pkcs11,secrets,ssh
exec-once = export SSH_AUTH_SOCK=$XDG_RUNTIME_DIR/gcr/ssh

# D-Bus activation
exec-once = dbus-update-activation-environment --all

# System services
exec-once = nm-applet --indicator &              # NetworkManager tray
exec-once = blueman-applet &                     # Bluetooth tray

# Idle configuration
exec-once = hypridle

# Blue light filter
exec-once = hyprsunset

# Clipboard management
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store

# Input method
exec-once = fcitx5 -d --replace

# Audio effects (optional)
exec-once = easyeffects --gapplication-service &

# User directories
exec-once = xdg-user-dirs-update
